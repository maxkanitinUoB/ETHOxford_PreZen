<!-- profile.html -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PreZen | Portfolio</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet" />

  <style>
    :root {
      /* Main template variables */
      --primary: #2563eb;
      --primary-dark: #1d4ed8;
      --secondary: #7c3aed;
      --accent: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --dark: #1e293b;
      --light: #f8fafc;
      --gray: #64748b;
      --gray-light: #e2e8f0;
      --border-radius: 12px;
      --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --transition: all 0.3s ease;

      /* Portfolio page palette mapped onto template */
      --p-primary: var(--primary);
      --p-primary-light: #E6F0FF;
      --p-success: var(--accent);
      --p-danger: var(--danger);
      --p-warning: var(--warning);
      --p-dark: #111827;
      --p-light: #FFFFFF;

      --p-gray-50: #F9FAFB;
      --p-gray-100: #F3F4F6;
      --p-gray-200: #E5E7EB;
      --p-gray-300: #D1D5DB;
      --p-gray-400: #9CA3AF;
      --p-gray-500: #6B7280;
      --p-gray-600: #4B5563;
      --p-gray-700: #374151;

      --p-radius: 12px;
      --p-radius-sm: 10px;
      --p-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04);
      --p-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      --p-transition: all 0.15s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Inter", sans-serif;
      line-height: 1.6;
      color: var(--dark);
      background-color: #f1f5f9;
      display: flex;
      min-height: 100vh;
    }

    h1,
    h2,
    h3,
    h4,
    h5 {
      font-family: "Poppins", sans-serif;
      font-weight: 600;
      line-height: 1.3;
    }

    .container {
      display: flex;
      width: 100%;
    }

    /* Sidebar (main template) */
    .sidebar {
      width: 260px;
      background-color: white;
      border-right: 1px solid var(--gray-light);
      padding: 20px;
      height: 100vh;
      position: sticky;
      top: 0;
      overflow-y: auto;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--primary);
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--gray-light);
    }

    .logo-icon {
      color: var(--secondary);
    }

    .user-profile {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 30px;
      padding: 15px;
      background-color: #f8fafc;
      border-radius: var(--border-radius);
    }

    .user-avatar {
      width: 50px;
      height: 50px;
      background-color: var(--primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 1.2rem;
    }

    .user-info h3 {
      font-size: 1.1rem;
      margin-bottom: 5px;
    }

    .user-level {
      display: inline-block;
      background-color: var(--accent);
      color: white;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }

    .user-stats {
      display: flex;
      gap: 15px;
      margin-top: 8px;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-weight: 700;
      font-size: 1.1rem;
      color: var(--primary);
    }

    .stat-label {
      font-size: 0.8rem;
      color: var(--gray);
    }

    .nav-section {
      margin-bottom: 30px;
    }

    .nav-title {
      font-size: 0.9rem;
      text-transform: uppercase;
      color: var(--gray);
      margin-bottom: 15px;
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    .nav-links {
      list-style: none;
    }

    .nav-links li {
      margin-bottom: 10px;
    }

    .nav-links a {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 15px;
      text-decoration: none;
      color: var(--dark);
      border-radius: var(--border-radius);
      transition: var(--transition);
    }

    .nav-links a:hover,
    .nav-links a.active {
      background-color: #f0f9ff;
      color: var(--primary);
    }

    .nav-links a i {
      width: 20px;
      text-align: center;
    }

    .upgrade-card {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      padding: 20px;
      border-radius: var(--border-radius);
      margin-top: 30px;
    }

    .upgrade-card h4 {
      margin-bottom: 10px;
      font-size: 1.1rem;
    }

    .upgrade-card p {
      font-size: 0.9rem;
      opacity: 0.9;
      margin-bottom: 15px;
    }

    .upgrade-button {
      background-color: white;
      color: var(--primary);
      border: none;
      padding: 10px 20px;
      border-radius: var(--border-radius);
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      transition: var(--transition);
    }

    .upgrade-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow);
    }

    /* Main */
    .main-content {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      height: 100vh;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 18px;
      padding-bottom: 18px;
      border-bottom: 1px solid var(--gray-light);
      gap: 16px;
    }

    .search-bar {
      flex: 1;
      max-width: 520px;
      position: relative;
    }

    .search-bar input {
      width: 100%;
      padding: 12px 20px 12px 45px;
      border: 1px solid var(--gray-light);
      border-radius: var(--border-radius);
      font-size: 1rem;
      background-color: white;
      outline: none;
      transition: var(--transition);
    }

    .search-bar input:focus {
      border-color: rgba(37, 99, 235, 0.35);
      box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.10);
    }

    .search-bar i {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--gray);
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .notification-badge {
      position: relative;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 44px;
      height: 44px;
      border-radius: 999px;
      background: white;
      border: 1px solid var(--gray-light);
      transition: var(--transition);
    }

    .notification-badge:hover {
      transform: translateY(-1px);
      box-shadow: var(--shadow);
    }

    .badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: var(--danger);
      color: white;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      font-size: 0.7rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      border: 2px solid #f1f5f9;
    }

    .post-button {
      background-color: var(--primary);
      color: white;
      border: none;
      padding: 12px 18px;
      border-radius: var(--border-radius);
      font-weight: 800;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: var(--transition);
      white-space: nowrap;
    }

    .post-button:hover {
      background-color: var(--primary-dark);
      transform: translateY(-1px);
      box-shadow: var(--shadow);
    }

    /* Page heading */
    .page-title-row {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 12px;
      margin: 6px 0 18px;
      flex-wrap: wrap;
    }

    .page-title {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1.45rem;
      font-weight: 900;
      color: var(--dark);
      font-family: "Poppins", sans-serif;
    }

    .page-subtitle {
      color: var(--gray);
      font-weight: 650;
      font-size: 0.95rem;
      margin-top: 6px;
      max-width: 820px;
    }

    /* ===== Portfolio page (embedded) ===== */
    .portfolio-container {
      max-width: 1200px;
      margin: 0 auto;
      background: var(--p-light);
      border-radius: var(--p-radius);
      box-shadow: var(--p-shadow);
      overflow: hidden;
      border: 1px solid var(--gray-light);
    }

    /* Header */
    .portfolio-header {
      padding: 22px 24px;
      border-bottom: 1px solid var(--gray-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
      background: white;
    }

    .header-left h1 {
      font-size: 22px;
      font-weight: 800;
      color: var(--p-dark);
      margin-bottom: 4px;
      font-family: "Poppins", sans-serif;
    }

    .header-left p {
      font-size: 13px;
      color: var(--p-gray-500);
      font-weight: 650;
    }

    .header-right {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 10px 16px;
      border-radius: var(--p-radius-sm);
      border: none;
      font-size: 13px;
      font-weight: 800;
      cursor: pointer;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      white-space: nowrap;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background: var(--primary-dark);
      transform: translateY(-1px);
      box-shadow: var(--shadow);
    }

    .btn-outline {
      background: transparent;
      border: 1px solid var(--gray-light);
      color: var(--p-gray-600);
    }

    .btn-outline:hover {
      border-color: rgba(37, 99, 235, 0.35);
      color: var(--primary);
      background: #f0f9ff;
      transform: translateY(-1px);
      box-shadow: 0 8px 14px -12px rgba(0, 0, 0, 0.18);
    }

    /* Metrics */
    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(6, minmax(0, 1fr));
      gap: 14px;
      padding: 24px 32px;
      border-bottom: 1px solid var(--gray-light);
      background: white;
    }

    .metric-card {
      background: #f8fafc;
      border-radius: var(--p-radius-sm);
      padding: 18px;
      text-align: center;
      border: 1px solid var(--gray-light);
      transition: var(--transition);
    }

    .metric-card:hover {
      border-color: rgba(37, 99, 235, 0.35);
      box-shadow: 0 8px 14px -12px rgba(0, 0, 0, 0.18);
      transform: translateY(-1px);
    }

    .metric-value {
      font-size: 24px;
      font-weight: 900;
      color: var(--p-dark);
      margin-bottom: 4px;
      letter-spacing: -0.2px;
    }

    .metric-label {
      font-size: 11px;
      color: var(--p-gray-500);
      text-transform: uppercase;
      letter-spacing: 0.6px;
      font-weight: 800;
    }

    .metric-change {
      font-size: 12px;
      font-weight: 900;
      padding: 3px 10px;
      border-radius: 999px;
      display: inline-block;
      margin-top: 8px;
      border: 1px solid rgba(100, 116, 139, 0.15);
      background: white;
      color: var(--p-gray-600);
    }

    .change-positive {
      background: rgba(16, 185, 129, 0.10);
      color: var(--p-success);
      border-color: rgba(16, 185, 129, 0.18);
    }

    .change-negative {
      background: rgba(239, 68, 68, 0.10);
      color: var(--p-danger);
      border-color: rgba(239, 68, 68, 0.18);
    }

    /* Content grid */
    .content-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 18px;
      padding: 18px 24px;
      background: white;
    }

    @media (max-width: 1200px) {
      .metrics-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    @media (max-width: 900px) {
      .content-grid {
        grid-template-columns: 1fr;
      }

      .metrics-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 520px) {
      .metrics-grid {
        grid-template-columns: 1fr;
        padding: 18px 16px;
      }
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 14px;
      gap: 10px;
      flex-wrap: wrap;
    }

    .section-title {
      font-size: 16px;
      font-weight: 900;
      color: var(--p-dark);
      font-family: "Poppins", sans-serif;
    }

    /* Allocation */
    .allocation-container {
      display: flex;
      align-items: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    .pie-chart {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      background: conic-gradient(#3B82F6 0% 38%,
          #10B981 38% 65%,
          #8B5CF6 65% 80%,
          #F59E0B 80% 92%,
          var(--p-gray-300) 92% 100%);
      border: 1px solid var(--gray-light);
      box-shadow: 0 8px 14px -12px rgba(0, 0, 0, 0.18);
    }

    .allocation-list {
      flex: 1;
      min-width: 240px;
    }

    .allocation-item {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px solid var(--p-gray-100);
      font-weight: 700;
    }

    .allocation-label {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 13.5px;
      color: var(--p-gray-700);
    }

    .color-dot {
      width: 9px;
      height: 9px;
      border-radius: 50%;
    }

    .allocation-value {
      font-weight: 900;
      color: var(--p-dark);
    }

    /* Positions table */
    .positions-table {
      width: 100%;
      border-collapse: collapse;
    }

    .positions-table th {
      text-align: left;
      padding: 10px 0;
      border-bottom: 1px solid var(--gray-light);
      font-size: 11px;
      font-weight: 900;
      color: var(--p-gray-500);
      text-transform: uppercase;
      letter-spacing: 0.6px;
    }

    .positions-table td {
      padding: 14px 0;
      border-bottom: 1px solid var(--p-gray-100);
      font-size: 13.5px;
      vertical-align: top;
    }

    .position-market {
      font-weight: 900;
      color: var(--p-dark);
      margin-bottom: 4px;
    }

    .position-outcome {
      font-size: 11px;
      padding: 5px 9px;
      border-radius: 8px;
      display: inline-block;
      font-weight: 900;
      border: 1px solid rgba(100, 116, 139, 0.14);
    }

    .outcome-yes {
      background: rgba(16, 185, 129, 0.10);
      color: var(--p-success);
      border-color: rgba(16, 185, 129, 0.18);
    }

    .outcome-no {
      background: rgba(239, 68, 68, 0.10);
      color: var(--p-danger);
      border-color: rgba(239, 68, 68, 0.18);
    }

    .probability-change {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      margin-top: 6px;
      font-weight: 900;
    }

    .change-up {
      color: var(--p-success);
    }

    .change-down {
      color: var(--p-danger);
    }

    .position-pnl {
      font-weight: 900;
      margin-bottom: 4px;
    }

    .pnl-positive {
      color: var(--p-success);
    }

    .pnl-negative {
      color: var(--p-danger);
    }

    .time-to-resolve {
      font-size: 12px;
      color: var(--p-gray-500);
      font-weight: 700;
    }

    .position-actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .action-btn {
      padding: 6px 8px;
      border: 1px solid var(--gray-light);
      border-radius: 10px;
      background: transparent;
      color: var(--p-gray-600);
      font-size: 12px;
      cursor: pointer;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 34px;
    }

    .action-btn:hover {
      border-color: rgba(37, 99, 235, 0.35);
      color: var(--primary);
      background: #f0f9ff;
      transform: translateY(-1px);
    }

    /* Performance (Canvas chart) */
    .chart-container {
      background: #f8fafc;
      border-radius: var(--p-radius-sm);
      padding: 16px;
      margin-top: 12px;
      border: 1px solid var(--gray-light);
    }

    .chart-caption {
      margin-top: 10px;
      font-size: 12px;
      color: var(--p-gray-500);
      font-weight: 800;
      line-height: 1.4;
    }

    .chart-switch .btn-outline.is-active {
      background: #f0f9ff;
      border-color: rgba(37, 99, 235, 0.35);
      color: var(--primary);
      box-shadow: 0 8px 14px -12px rgba(0, 0, 0, 0.18);
    }

    /* Skills */
    .skills-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-top: 12px;
    }

    .skill-metric {
      background: #f8fafc;
      border-radius: var(--p-radius-sm);
      padding: 14px;
      text-align: center;
      border: 1px solid var(--gray-light);
    }

    .skill-value {
      font-size: 18px;
      font-weight: 900;
      color: var(--p-dark);
      margin-bottom: 4px;
    }

    .skill-label {
      font-size: 11px;
      color: var(--p-gray-500);
      text-transform: uppercase;
      letter-spacing: 0.6px;
      font-weight: 900;
    }

    /* Risk */
    .risk-section,
    .social-overlay {
      grid-column: 1 / -1;
    }

    .risk-meters {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
      margin-top: 12px;
    }

    .risk-meter {
      background: #f8fafc;
      border-radius: var(--p-radius-sm);
      padding: 16px;
      border: 1px solid var(--gray-light);
    }

    .meter-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      gap: 10px;
    }

    .meter-label {
      font-size: 13px;
      font-weight: 900;
      color: var(--p-dark);
    }

    .meter-value {
      font-size: 11px;
      font-weight: 900;
      padding: 3px 10px;
      border-radius: 999px;
      border: 1px solid rgba(100, 116, 139, 0.14);
      white-space: nowrap;
    }

    .meter-low {
      background: rgba(16, 185, 129, 0.10);
      color: var(--p-success);
      border-color: rgba(16, 185, 129, 0.18);
    }

    .meter-medium {
      background: rgba(245, 158, 11, 0.10);
      color: var(--p-warning);
      border-color: rgba(245, 158, 11, 0.18);
    }

    .meter-high {
      background: rgba(239, 68, 68, 0.10);
      color: var(--p-danger);
      border-color: rgba(239, 68, 68, 0.18);
    }

    .meter-bar {
      height: 6px;
      background: var(--p-gray-200);
      border-radius: 999px;
      overflow: hidden;
      margin-top: 8px;
    }

    .meter-fill {
      height: 100%;
      border-radius: 999px;
      transition: width 0.5s ease;
    }

    .fill-low {
      background: var(--p-success);
      width: 30%;
    }

    .fill-medium {
      background: var(--p-warning);
      width: 60%;
    }

    .fill-high {
      background: var(--p-danger);
      width: 85%;
    }

    /* Social badges */
    .social-badges {
      display: flex;
      gap: 10px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .social-badge {
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 900;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      border: 1px solid rgba(100, 116, 139, 0.14);
      background: #f8fafc;
      color: var(--p-gray-700);
    }

    .badge-following {
      background: rgba(139, 92, 246, 0.10);
      color: #8B5CF6;
      border-color: rgba(139, 92, 246, 0.18);
    }

    .badge-whale {
      background: rgba(59, 130, 246, 0.10);
      color: #3B82F6;
      border-color: rgba(59, 130, 246, 0.18);
    }

    .badge-contrarian {
      background: rgba(245, 158, 11, 0.10);
      color: var(--p-warning);
      border-color: rgba(245, 158, 11, 0.18);
    }

    /* Footer actions */
    .quick-actions {
      display: flex;
      justify-content: center;
      gap: 12px;
      padding: 18px 24px;
      border-top: 1px solid var(--gray-light);
      background: #f8fafc;
      flex-wrap: wrap;
    }

    /* Responsive template */
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        height: auto;
        position: relative;
      }

      .main-content {
        height: auto;
      }

      .header {
        flex-direction: column;
        align-items: stretch;
      }

      .search-bar {
        max-width: 100%;
      }
    }

    @media (max-width: 520px) {
      .skills-grid {
        grid-template-columns: 1fr;
      }

      .allocation-container {
        justify-content: center;
      }

      .allocation-list {
        min-width: 100%;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <aside class="sidebar">
      <div class="logo">
        <i class="fas fa-chart-line logo-icon"></i>
        <span>PreZen</span>
      </div>

      <div class="user-profile">
        <div class="user-avatar">JD</div>
        <div class="user-info">
          <h3>John Doe</h3>
          <div class="user-level">Level 3 Trader</div>
          <div class="user-stats">
            <div class="stat">
              <div class="stat-value">72%</div>
              <div class="stat-label">Win Rate</div>
            </div>
            <div class="stat">
              <div class="stat-value">$2.1K</div>
              <div class="stat-label">Staked</div>
            </div>
          </div>
        </div>
      </div>

      <div class="nav-section">
        <h4 class="nav-title">Main</h4>
        <ul class="nav-links">
          <li><a href="home.html"><i class="fas fa-home"></i> Home</a></li>
          <li><a class="active" href="profile.html"><i class="fas fa-user"></i> Profile</a></li>
          <li><a href="trade.html"><i class="fas fa-chart-line"></i> Trade</a></li>
          <li><a href="chat.html"><i class="fas fa-comments"></i> Chat</a></li>
          <li><a href="notifications.html"><i class="fas fa-bell"></i> Notifications</a></li>
          <li><a href="saved.html"><i class="fas fa-bookmark"></i> Saved</a></li>
          <li><a href="AIsignals.html"><i class="fas fa-robot"></i> AI Signals</a></li>
          <li><a href="settings.html"><i class="fas fa-cog"></i> Settings</a></li>
        </ul>
      </div>

      <div class="upgrade-card">
        <h4>Upgrade to Premium</h4>
        <p>Get smart filtering, reputation-weighted odds, and AI recommendations</p>
        <button class="upgrade-button" id="upgradeBtn">Upgrade Now</button>
      </div>
    </aside>

    <main class="main-content">
      <div class="header">
        <div class="search-bar">
          <i class="fas fa-search"></i>
          <input id="searchInput" type="text" placeholder="Search portfolio..." />
        </div>
        <div class="header-actions">
          <div class="notification-badge" title="Notifications" id="notifBtn">
            <i class="fas fa-bell" style="font-size: 1.1rem;"></i>
            <div class="badge" id="notifBadge">3</div>
          </div>
          <button class="post-button" id="newTradeBtn">
            <i class="fas fa-plus"></i> New Trade
          </button>
        </div>
      </div>

      <div class="page-title-row">
        <div>
          <div class="page-title"><i class="fas fa-user"></i> Profile</div>
          <div class="page-subtitle">Your portfolio, positions, performance, and risk signals.</div>
        </div>
      </div>

      <!-- Portfolio page inserted into template -->
      <div class="portfolio-container" id="portfolioRoot">
        <!-- Header -->
        <div class="portfolio-header">
          <div class="header-left">
            <h1>Investment Portfolio</h1>
            <p>John Doe • Last updated: Just now</p>
          </div>
          <div class="header-right">
            <button class="btn btn-outline" onclick="sharePortfolio()">
              <i class="fas fa-share"></i> Share
            </button>
            <button class="btn btn-primary" onclick="exportPortfolio()">
              <i class="fas fa-download"></i> Export
            </button>
          </div>
        </div>

        <!-- Top Metrics -->
        <div class="metrics-grid">
          <div class="metric-card">
            <div class="metric-value">$42,850</div>
            <div class="metric-label">Total Portfolio Value</div>
            <div class="metric-change change-positive">+$2,150</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">+$8,420</div>
            <div class="metric-label">Net PnL</div>
            <div class="metric-change change-positive">+24.5%</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">84%</div>
            <div class="metric-label">Win Rate</div>
            <div class="metric-change change-positive">+2.1%</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">8</div>
            <div class="metric-label">Active Positions</div>
            <div class="metric-change">+2 today</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">$18,500</div>
            <div class="metric-label">Capital at Risk</div>
            <div class="metric-change">43% of portfolio</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">$12,430</div>
            <div class="metric-label">Available Balance</div>
            <div class="metric-change change-positive">+$5,000</div>
          </div>
        </div>

        <!-- Main Content -->
        <div class="content-grid">
          <!-- Allocation -->
          <div class="allocation-section">
            <div class="section-header">
              <h2 class="section-title">Portfolio Allocation</h2>
              <button class="btn btn-outline" style="padding: 8px 12px; font-size: 12px;">
                <i class="fas fa-chart-pie"></i> View Details
              </button>
            </div>
            <div class="allocation-container">
              <div class="pie-chart"></div>
              <div class="allocation-list">
                <div class="allocation-item">
                  <div class="allocation-label">
                    <div class="color-dot" style="background: #3B82F6;"></div>
                    Politics
                  </div>
                  <div class="allocation-value">38%</div>
                </div>
                <div class="allocation-item">
                  <div class="allocation-label">
                    <div class="color-dot" style="background: #10B981;"></div>
                    Crypto
                  </div>
                  <div class="allocation-value">27%</div>
                </div>
                <div class="allocation-item">
                  <div class="allocation-label">
                    <div class="color-dot" style="background: #8B5CF6;"></div>
                    Sports
                  </div>
                  <div class="allocation-value">18%</div>
                </div>
                <div class="allocation-item">
                  <div class="allocation-label">
                    <div class="color-dot" style="background: #F59E0B;"></div>
                    Finance
                  </div>
                  <div class="allocation-value">12%</div>
                </div>
                <div class="allocation-item">
                  <div class="allocation-label">
                    <div class="color-dot" style="background: var(--p-gray-300);"></div>
                    Others
                  </div>
                  <div class="allocation-value">5%</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Positions -->
          <div class="positions-section">
            <div class="section-header">
              <h2 class="section-title">Open Positions</h2>
              <span style="font-size: 12px; color: var(--p-gray-500); font-weight: 800;">8 positions • $18.5K at
                risk</span>
            </div>
            <div class="table-container">
              <table class="positions-table">
                <thead>
                  <tr>
                    <th>Market</th>
                    <th>Position</th>
                    <th>P/L</th>
                    <th>Resolves</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <div class="position-market">ETH $4K by Dec 2024</div>
                      <div class="time-to-resolve">14 days left</div>
                    </td>
                    <td>
                      <span class="position-outcome outcome-yes">YES @ 68%</span>
                      <div class="probability-change">
                        <i class="fas fa-arrow-up change-up"></i>
                        <span class="change-up">+4%</span>
                      </div>
                    </td>
                    <td>
                      <div class="position-pnl pnl-positive">+$1,240</div>
                      <div class="time-to-resolve">+29.5% ROI</div>
                    </td>
                    <td>
                      <div class="time-to-resolve">Dec 31</div>
                      <div class="progress-bar"
                        style="width: 85%; height: 4px; background: var(--p-gray-200); border-radius: 999px; margin-top: 6px;">
                        <div style="width: 85%; height: 100%; background: var(--p-success); border-radius: 999px;"></div>
                      </div>
                    </td>
                    <td>
                      <div class="position-actions">
                        <button class="action-btn" onclick="viewMarket('ETH')" title="View">
                          <i class="fas fa-eye"></i>
                        </button>
                        <button class="action-btn" onclick="closePosition('ETH')" title="Close">
                          <i class="fas fa-times"></i>
                        </button>
                      </div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <div class="position-market">Trump Wins 2024</div>
                      <div class="time-to-resolve">45 days left</div>
                    </td>
                    <td>
                      <span class="position-outcome outcome-yes">YES @ 67%</span>
                      <div class="probability-change">
                        <i class="fas fa-arrow-up change-up"></i>
                        <span class="change-up">+2%</span>
                      </div>
                    </td>
                    <td>
                      <div class="position-pnl pnl-positive">+$2,150</div>
                      <div class="time-to-resolve">+18.2% ROI</div>
                    </td>
                    <td>
                      <div class="time-to-resolve">Nov 5</div>
                      <div class="progress-bar"
                        style="width: 65%; height: 4px; background: var(--p-gray-200); border-radius: 999px; margin-top: 6px;">
                        <div style="width: 65%; height: 100%; background: var(--p-success); border-radius: 999px;"></div>
                      </div>
                    </td>
                    <td>
                      <div class="position-actions">
                        <button class="action-btn" onclick="viewMarket('Trump')" title="View">
                          <i class="fas fa-eye"></i>
                        </button>
                        <button class="action-btn" onclick="closePosition('Trump')" title="Close">
                          <i class="fas fa-times"></i>
                        </button>
                      </div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <div class="position-market">Fed Rate Cut in Sep</div>
                      <div class="time-to-resolve">30 days left</div>
                    </td>
                    <td>
                      <span class="position-outcome outcome-no">NO @ 58%</span>
                      <div class="probability-change">
                        <i class="fas fa-arrow-down change-down"></i>
                        <span class="change-down">-3%</span>
                      </div>
                    </td>
                    <td>
                      <div class="position-pnl pnl-negative">-$420</div>
                      <div class="time-to-resolve">-8.4% ROI</div>
                    </td>
                    <td>
                      <div class="time-to-resolve">Sep 30</div>
                      <div class="progress-bar"
                        style="width: 40%; height: 4px; background: var(--p-gray-200); border-radius: 999px; margin-top: 6px;">
                        <div style="width: 40%; height: 100%; background: var(--p-danger); border-radius: 999px;"></div>
                      </div>
                    </td>
                    <td>
                      <div class="position-actions">
                        <button class="action-btn" onclick="viewMarket('Fed')" title="View">
                          <i class="fas fa-eye"></i>
                        </button>
                        <button class="action-btn" onclick="closePosition('Fed')" title="Close">
                          <i class="fas fa-times"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Performance (REAL LINE CHART) -->
          <div class="performance-section">
            <div class="section-header">
              <h2 class="section-title">Performance Over Time</h2>
              <div class="chart-switch" style="display:flex; gap:8px; flex-wrap:wrap;">
                <button id="btnChartValue" class="btn btn-outline is-active"
                  style="padding: 6px 12px; font-size: 12px;" onclick="toggleChart('value')">
                  Value
                </button>
                <button id="btnChartPnL" class="btn btn-outline" style="padding: 6px 12px; font-size: 12px;"
                  onclick="toggleChart('pnl')">
                  PnL
                </button>
              </div>
            </div>

            <div class="chart-container">
              <canvas id="portfolioValueChart" height="220" style="width:100%; display:block;"></canvas>
              <div class="chart-caption" id="chartCaption">
                Line chart showing growth from <strong>$34,430</strong> → <strong>$42,850</strong> (Jan 2022 – Dec 2025)
              </div>
            </div>
          </div>

          <!-- Skills -->
          <div class="skills-section">
            <div class="section-header">
              <h2 class="section-title">Market Skill Breakdown</h2>
              <span style="font-size: 12px; color: var(--p-gray-500); font-weight: 800;">Accuracy vs. Market</span>
            </div>
            <div class="skills-grid">
              <div class="skill-metric">
                <div class="skill-value">92%</div>
                <div class="skill-label">Politics</div>
                <div style="font-size: 11px; color: var(--p-success); margin-top: 6px; font-weight: 900;">+12% vs
                  market</div>
              </div>
              <div class="skill-metric">
                <div class="skill-value">76%</div>
                <div class="skill-label">Crypto</div>
                <div style="font-size: 11px; color: var(--p-success); margin-top: 6px; font-weight: 900;">+8% vs market
                </div>
              </div>
              <div class="skill-metric">
                <div class="skill-value">68%</div>
                <div class="skill-label">Sports</div>
                <div style="font-size: 11px; color: var(--p-warning); margin-top: 6px; font-weight: 900;">+2% vs market
                </div>
              </div>
              <div class="skill-metric">
                <div class="skill-value">45%</div>
                <div class="skill-label">Finance</div>
                <div style="font-size: 11px; color: var(--p-danger); margin-top: 6px; font-weight: 900;">-15% vs market
                </div>
              </div>
            </div>
          </div>

          <!-- Risk -->
          <div class="risk-section">
            <div class="section-header">
              <h2 class="section-title">Risk & Exposure Signals</h2>
              <span style="font-size: 12px; color: var(--p-gray-500); font-weight: 800;">Monitor your risk profile</span>
            </div>
            <div class="risk-meters">
              <div class="risk-meter">
                <div class="meter-header">
                  <div class="meter-label">Politics Exposure</div>
                  <div class="meter-value meter-high">High</div>
                </div>
                <div class="meter-bar">
                  <div class="meter-fill fill-high"></div>
                </div>
                <div style="font-size: 12px; color: var(--p-gray-600); margin-top: 10px; font-weight: 700;">
                  38% of portfolio in political markets
                </div>
              </div>

              <div class="risk-meter">
                <div class="meter-header">
                  <div class="meter-label">Correlated Bets</div>
                  <div class="meter-value meter-medium">Medium</div>
                </div>
                <div class="meter-bar">
                  <div class="meter-fill fill-medium"></div>
                </div>
                <div style="font-size: 12px; color: var(--p-gray-600); margin-top: 10px; font-weight: 700;">
                  3 positions share similar risk factors
                </div>
              </div>

              <div class="risk-meter">
                <div class="meter-header">
                  <div class="meter-label">Single Market Risk</div>
                  <div class="meter-value meter-low">Low</div>
                </div>
                <div class="meter-bar">
                  <div class="meter-fill fill-low"></div>
                </div>
                <div style="font-size: 12px; color: var(--p-gray-600); margin-top: 10px; font-weight: 700;">
                  Max 12% in any single market
                </div>
              </div>
            </div>
          </div>

          <!-- Social -->
          <div class="social-overlay">
            <div class="section-header">
              <h2 class="section-title">Smart Money Signals</h2>
              <span style="font-size: 12px; color: var(--p-gray-500); font-weight: 800;">How your portfolio compares</span>
            </div>
            <div class="social-badges">
              <div class="social-badge badge-following">
                <i class="fas fa-user-friends"></i>
                Following top 5% trader on 4 positions
              </div>
              <div class="social-badge badge-whale">
                <i class="fas fa-whale"></i>
                Whale entered after you in ETH position
              </div>
              <div class="social-badge badge-contrarian">
                <i class="fas fa-user-secret"></i>
                Contrarian vs crowd on Fed position
              </div>
            </div>
          </div>
        </div>

        <!-- Footer -->
        <div class="quick-actions">
          <button class="btn btn-outline" onclick="viewAllPositions()">
            <i class="fas fa-list"></i> View All Positions
          </button>
          <button class="btn btn-outline" onclick="riskAnalysis()">
            <i class="fas fa-shield-alt"></i> Risk Analysis
          </button>
          <button class="btn btn-primary" onclick="newTrade()">
            <i class="fas fa-plus"></i> New Trade
          </button>
        </div>
      </div>
    </main>
  </div>

  <script>
    // Header actions (template)
    document.getElementById("upgradeBtn").addEventListener("click", () => {
      alert("Upgrade flow would open here.");
    });

    document.getElementById("notifBtn").addEventListener("click", () => {
      window.location.href = "notifications.html";
    });

    document.getElementById("newTradeBtn").addEventListener("click", () => {
      newTrade();
    });

    // ===== Portfolio Functions =====
    function sharePortfolio() {
      alert('Portfolio shared! A screenshot has been copied to your clipboard.');
    }

    function exportPortfolio() {
      alert('Exporting portfolio data as CSV...');
    }

    function viewMarket(market) {
      alert(`Viewing market: ${market}`);
    }

    function closePosition(market) {
      if (confirm(`Close position in ${market}?`)) {
        alert(`Position in ${market} closed.`);
      }
    }

    function viewAllPositions() {
      alert('Navigating to all positions...');
    }

    function riskAnalysis() {
      alert('Opening detailed risk analysis...');
    }

    function newTrade() {
      alert('Opening new trade interface...');
    }

    // ===== Search (filters table rows + social badges) =====
    const searchInput = document.getElementById("searchInput");
    searchInput.addEventListener("input", () => {
      const q = searchInput.value.trim().toLowerCase();

      document.querySelectorAll(".positions-table tbody tr").forEach(tr => {
        const txt = (tr.textContent || "").toLowerCase();
        tr.style.display = (!q || txt.includes(q)) ? "" : "none";
      });

      document.querySelectorAll(".social-badge").forEach(b => {
        const txt = (b.textContent || "").toLowerCase();
        b.style.display = (!q || txt.includes(q)) ? "" : "none";
      });
    });

    // ===== Live updates (demo) =====
    function updateLiveMetrics() {
      const metrics = document.querySelectorAll('.metric-value');
      metrics.forEach(metric => {
        const value = metric.textContent;
        if (value.includes('$') && !value.includes('+') && !value.includes('-')) {
          const num = parseFloat(value.replace(/[^0-9.]/g, ''));
          const change = (Math.random() - 0.5) * 0.02;
          const newVal = num * (1 + change);
          metric.textContent = '$' + newVal.toFixed(0);
        }
      });
    }
    setInterval(updateLiveMetrics, 10000);

    // ===== Canvas Line Chart (Jan 2022 -> Dec 2025) =====
    const CHART = {
      current: "value",
      labels: [],
      series: {
        value: [],
        pnl: []
      }
    };

    function cssVar(name, fallback) {
      const v = getComputedStyle(document.documentElement).getPropertyValue(name);
      return (v && v.trim()) ? v.trim() : fallback;
    }

    function formatMoney(n) {
      return "$" + Math.round(n).toLocaleString();
    }

    function formatMoneySigned(n) {
      const sign = n >= 0 ? "+" : "-";
      return sign + "$" + Math.abs(Math.round(n)).toLocaleString();
    }

    function buildLabelsJan2022ToDec2025() {
      const labels = [];
      const start = new Date(2022, 0, 1); // Jan 2022
      const months = 48;
      for (let i = 0; i < months; i++) {
        const d = new Date(start.getFullYear(), start.getMonth() + i, 1);
        const m = d.toLocaleString("en-GB", { month: "short" });
        const y = String(d.getFullYear()).slice(-2);
        labels.push(`${m} ${y}`);
      }
      return labels;
    }

    // Smooth series that matches exact endpoints
    function buildSmoothSeries(startValue, endValue, wiggleAmp) {
      const months = 48;
      const out = [];
      for (let i = 0; i < months; i++) {
        const t = i / (months - 1);
        const base = startValue + t * (endValue - startValue);

        // Wiggle fades to 0 at endpoints (sin(pi*t) factor)
        const w =
          Math.sin(6 * Math.PI * t) * Math.sin(Math.PI * t) * wiggleAmp +
          Math.sin(2 * Math.PI * t) * Math.sin(Math.PI * t) * (wiggleAmp * 0.35);

        out.push(base + w);
      }
      out[0] = startValue;
      out[out.length - 1] = endValue;
      return out;
    }

    function sizeCanvasForHiDPI(canvas, cssHeight) {
      const dpr = window.devicePixelRatio || 1;
      const cssWidth = canvas.clientWidth;

      canvas.width = Math.floor(cssWidth * dpr);
      canvas.height = Math.floor(cssHeight * dpr);

      const ctx = canvas.getContext("2d");
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      return { ctx, cssWidth, cssHeight };
    }

    function drawLineChart({ canvasId, labels, data, title, subtitle, yFormatter }) {
      const canvas = document.getElementById(canvasId);
      if (!canvas) return;

      const cssHeight = Number(canvas.getAttribute("height")) || 220;
      const { ctx, cssWidth: W, cssHeight: H } = sizeCanvasForHiDPI(canvas, cssHeight);

      // Colors from theme
      const line = cssVar("--primary", "#2563eb");
      const grid = cssVar("--gray-light", "#e2e8f0");
      const text = cssVar("--p-gray-500", "#6b7280");
      const dark = cssVar("--p-dark", "#111827");
      const bg = "#f8fafc";

      // Layout
      const padL = 54, padR = 16, padT = 18, padB = 30;

      // Background
      ctx.clearRect(0, 0, W, H);
      ctx.fillStyle = bg;
      ctx.fillRect(0, 0, W, H);

      const min = Math.min(...data);
      const max = Math.max(...data);
      const range = (max - min) || 1;

      // breathing room
      const minY = min - range * 0.12;
      const maxY = max + range * 0.12;

      const xFor = (i) => padL + (i * (W - padL - padR)) / (data.length - 1);
      const yFor = (v) => padT + ((maxY - v) * (H - padT - padB)) / (maxY - minY);

      // Title
      ctx.fillStyle = dark;
      ctx.font = '800 13px Inter, sans-serif';
      ctx.textAlign = 'left';
      ctx.textBaseline = 'top';
      ctx.fillText(title, padL, 6);

      // Gridlines (Y) + labels
      ctx.strokeStyle = grid;
      ctx.lineWidth = 1;

      const yTicks = 4;
      ctx.fillStyle = text;
      ctx.font = '800 11px Inter, sans-serif';
      ctx.textAlign = 'right';
      ctx.textBaseline = 'middle';

      for (let i = 0; i <= yTicks; i++) {
        const y = padT + (i * (H - padT - padB)) / yTicks;

        ctx.beginPath();
        ctx.moveTo(padL, y);
        ctx.lineTo(W - padR, y);
        ctx.stroke();

        const value = maxY - (i * (maxY - minY)) / yTicks;
        ctx.fillText(yFormatter(value), padL - 10, y);
      }

      // X labels (every 6 months)
      ctx.fillStyle = text;
      ctx.font = '800 11px Inter, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'top';

      for (let i = 0; i < labels.length; i += 6) {
        ctx.fillText(labels[i], xFor(i), H - padB + 8);
      }

      // Line path
      ctx.lineWidth = 2.5;
      ctx.strokeStyle = line;
      ctx.lineJoin = "round";
      ctx.lineCap = "round";

      ctx.beginPath();
      for (let i = 0; i < data.length; i++) {
        const x = xFor(i);
        const y = yFor(data[i]);
        if (i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      }
      ctx.stroke();

      // Endpoint dots
      function dot(i) {
        const x = xFor(i);
        const y = yFor(data[i]);
        ctx.beginPath();
        ctx.fillStyle = line;
        ctx.arc(x, y, 3.6, 0, Math.PI * 2);
        ctx.fill();
      }
      dot(0);
      dot(data.length - 1);

      // Endpoint callouts
      ctx.font = '900 11px Inter, sans-serif';
      ctx.fillStyle = dark;
      ctx.textAlign = 'left';
      ctx.textBaseline = 'bottom';
      const startLabel = yFormatter(data[0]);
      const endLabel = yFormatter(data[data.length - 1]);

      ctx.fillText(startLabel, xFor(0) + 6, yFor(data[0]) - 6);
      ctx.textAlign = 'right';
      ctx.fillText(endLabel, xFor(data.length - 1) - 6, yFor(data[data.length - 1]) - 6);
    }

    function renderChart() {
      const caption = document.getElementById("chartCaption");
      if (!caption) return;

      if (CHART.current === "value") {
        caption.innerHTML =
          'Line chart showing growth from <strong>$34,430</strong> \u2192 <strong>$42,850</strong> (Jan 2022 \u2013 Dec 2025)';

        drawLineChart({
          canvasId: "portfolioValueChart",
          labels: CHART.labels,
          data: CHART.series.value,
          title: "Portfolio Value Over Time",
          subtitle: "",
          yFormatter: (v) => formatMoney(v)
        });
      } else {
        caption.innerHTML =
          'Line chart showing PnL from <strong>-$2,000</strong> \u2192 <strong>+$8,420</strong> (Jan 2022 \u2013 Dec 2025)';

        drawLineChart({
          canvasId: "portfolioValueChart",
          labels: CHART.labels,
          data: CHART.series.pnl,
          title: "PnL Over Time",
          subtitle: "",
          yFormatter: (v) => formatMoneySigned(v)
        });
      }
    }

    function setActiveChartButtons() {
      const b1 = document.getElementById("btnChartValue");
      const b2 = document.getElementById("btnChartPnL");
      if (!b1 || !b2) return;

      b1.classList.toggle("is-active", CHART.current === "value");
      b2.classList.toggle("is-active", CHART.current === "pnl");
    }

    function toggleChart(type) {
      CHART.current = (type === "pnl") ? "pnl" : "value";
      setActiveChartButtons();
      renderChart();
    }

    // Init chart data + first render
    function initChart() {
      CHART.labels = buildLabelsJan2022ToDec2025();
      CHART.series.value = buildSmoothSeries(34430, 42850, 650);
      CHART.series.pnl = buildSmoothSeries(-2000, 8420, 1100);
      setActiveChartButtons();
      renderChart();
    }

    // Re-render on resize (debounced)
    let resizeTimer = null;
    window.addEventListener("resize", () => {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(() => renderChart(), 120);
    });

    // Start
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", initChart);
    } else {
      initChart();
    }
  </script>
</body>

</html>
